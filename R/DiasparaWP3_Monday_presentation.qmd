---
title: "Creating database for migratory fishes"
subtitle: " To support a holistic and transparent assessment"
author: "Cédric Briand, Jules Oliviéro, Jani Helminen"
fontsize: 20pt
filters:
  - quarto-kroki
  - speakernotes
title-slide-attributes:
  data-background-image: images/diaspara_background.png
  data-background-size: stretch
  data-background-opacity: "0.5"
logo: images/diaspara_participants_logo.png
footer: ""
format: 
  revealjs :
    speakernotes:
      displayNotes: true  
    self-contained: true
  pdf:
    speakernotes:
      displayNotes: true
      customStyle: |
        roundcorner=5pt,
        subtitlebelowline=true,
        subtitleaboveline=true,
        subtitlebackgroundcolor=yellow!70!white,
        backgroundcolor=blue!20!white,
        frametitle={Theorem},
        frametitlerule=true,
        frametitlebackgroundcolor=yellow!70!white,
theme: solarized
background-transition: fade
editor: visual
---

::: notes
BACKGROUND
:::

# What is WP3?

![](images/clipboard-725413065.png)

# And why?

::::: columns
::: {.column .incremental width="50%"}
-   These species are found all over Europe
-   To conduct large-scale modeling, a significant amount of data is required
-   Such data must be easily accessible
:::

::: {.column .incremental width="50%"}
-   FAIR data bases – Findability, Accessibility, Interoperability, Reusability
-   Transparent Assessment Framework (TAF)
-   Spatialised and climate-enhanced SAM
:::
:::::

# Similar needs in diadromous assessment groups

-   Different levels of advancement but common “deadlocks”
    -   +Shad, lamprey...? ![](images/clipboard-3937337997.png)

# Current status of databases

::::: columns
::: {.column width="30%"}
![](images/clipboard-2303700149.png){width="321"}
:::

::: {.column width="70%"}
-   Available databases are for marine habitats and are designed for fisheries data (e.g., ICES RDBES)
-   Working groups have created their own databases:
    -   Stored in different database formats
    -   Different level of detail
    -   Sometimes large Excel files and/or external databases
    -   Within each group, individuals are dedicated to database work
:::
:::::

::: notes
2.  WHAT WE WILL BE DOING
:::

# Our Aim

::::: columns
::: {.column width="50%"}
-   Develop **four database templates** to facilitate more advanced and transparent assessment of migratory fish species.
-   These databases will be tailored for freshwater stages, incorporating a hydrographic network and migration barrier data.
:::

::: {.column .incremental width="50%"}
-   Subtasks
    -   Identify the needs of different working groups
    -   Discuss interoperability and storage with ICES and GFCM
    -   Propose a template suitable for different species
    -   Validate the structure by testing the integration of data provided by the project partners
:::
:::::

# Identifying the WG needs and Discuss with ICES & GFCM {.scrollable}

::::: columns
::: {.column .incremental width="50%"}
-   Several discussions with different organisations, people, groups
-   Presenting our main idea, identifying the needs of others
-   **What we propose in this workshop, we want to discuss with the WGs**
    -   Finding common ground and differences
:::

::: {.column .incremental width="50%"}
-   Databases will be designed to be interoperable, capable of handling nested spatial scales and able to address a variety of stressors.
-   Our goal is to deliver databases that can be effectively utilized by working groups (WGBAST, WGNAS, WGEEL, WGTRUTTA) in the long term.
:::
:::::

# Creating the base, not (necessarily) the data {.scrollable}

::::: columns
::: {.column .incremental width="50%"}
-   **Creating common dictionaries**

-   Create separate tables for each working group

    -   Some common information for all WGs, some separate

-   Common "simple" layer for international assessment needed - open data

-   All data does not (necessarily) have to be common or open
:::

::: {.column .incremental width="50%"}
-   Potential for updates in the future \* At some point there will be better international data available
-   Possibility to have better data for some areas / WGs \* National data will be better

![](images/clipboard-4103952801.png){width="321"}
:::
:::::

::: notes
Graphs here about what we are doing
:::

# What is needed?![](images/clipboard-435743568.png)

# What is needed?

![](images/clipboard-3512018033.png)

# What is needed?

![](images/clipboard-4003578754.png)

# What is needed?

![](images/clipboard-4003578754.png)

# What is needed?

![](images/clipboard-2921278741.png)

# What is needed?

![](images/clipboard-2447217679.png)

::: notes
Continue to different databases
:::

## Producing common dictionaries together with ICES

::::: columns
::: {.column .incremental width="50%"}
-   Will be used for both: –raw data in RDBES for catch and landings –Stock assessment database
-   Examples: age and lifestage
-   Referencials for habitat
-   Hierarchical so that spatial units can be integrated separately for different WGs
:::

::: {.column width="50%"}
![](images/clipboard-2783207033.png)
:::
:::::

# And therefore, the Deliverables

A quick look - details will be discussed on Tuesday

# Design four (-\>five) international databases

:::: columns
::: {.column width="35%"}
![](images/clipboard-1027936040.png){width="380"}
:::
::: {.column width="65%"}
-   Electrofishing
-   Habitat
-   Migration obstacles
-   Model parameters
-   Life history strategies, biological data
-   **Templates will be created**
:::
::::

## Electrofishing data

:::: columns
::: {.column width="50%"}
-   Currently it is just different templates for data call
-   We produce something together with the WGs
-   If it looks good, we will migrate to a common database
-   It makes no sense to have a separate ef db for different species
:::
::::

## Habitat and migration obstacles

:::: columns
::: {.column width="50%"}
-   Migration obstacles
-   Habitat availability, for models
-   Extend the work from e.g., AMBER and Sudoang
:::
::::

## Model parameters, life history parameters

:::: columns
::: {.column width="50%"}
-   Biological and model data that are not centrally stored
-   Moving towards Transparent Assessment Framework
-   Link with ICES working groups
-   Reuse WGEEL, WGNAS structures
-   New parameters in DIASPARA project
:::
::::

## RDBES proposal - priorities

:::: columns
::: {.column width="50%"}
1.  Commercial landings
2.  Recreational landings
3.  Store data that we currently store in sampling that are related to DCF sampling (raw data)
4.  Once this is done, talk about storing electrofishing data
5.  SAM model parameters - start with postgres and see whether it fits somewhere in ICES
6.  DAM and hydro db - Maybe JRC?
7.  Scripts to produce data from the RDBES will be needed, it has to be TAF
:::
::::

::: notes
Our work principles
:::

# Our feeling is that a common format can be found for salmon, trout and eel!

(without large compromises)

# Finally, a bit about our principles

## Everything is online

:::: columns
::: {.column width="100%"}
-   Progress can be followed throughout
-   Several releases: beta versions privately in Zenodo and then publicly as soon as the data are validated
-   Can be commented during the project
-   Postgis and parquet formats using R.

![](images/clipboard-3538707530.png)
:::
::::

## DATSU

:::: columns
::: {.column width="100%"}
-   DATSU is not one of project deliverables, but
-   As common dictionaries are used, DATSU can streamline future data calls

![](images/clipboard-3451821426.png)
:::
::::

## Principles {.scrollable}

::: columns
-   Follow ICES vocab, create when not existing (search for all vocab)
-   Separate the input of different WGs in different schema but the same db.
-   Allow for the hierarchichal spatial scale to be integrated in queries, the stucture of the db should allow for this. Hierarchic level
-   Some common dictionaries (countries, sea areas, habitat type, basins) inherited table for reference
-   Some separate dictionaries (stages, age, maturity) 
-   Separate parameters for the model and aggregated data built at the regional / national/ emu level. Two separate db for  output param observed value, same structure
-   Model parameters should be described in a separate table and maybe simplified.
-   Allow user rights for access to the db (read write access with group user role)
-   We can then use DATSU to check for consistency / trace data. 
-   Whenever possible, change minimal, don't add work to working group.
:::
